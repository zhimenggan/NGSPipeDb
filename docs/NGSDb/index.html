<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="canonical" href="https://xuanblo.github.io/NGSPipeDb/NGSDb/">
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>NGSDb - NGSPipeDb Document</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../css/theme.css" />
  <link rel="stylesheet" href="../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "NGSDb";
    var mkdocs_page_input_path = "NGSDb.md";
    var mkdocs_page_url = "/NGSPipeDb/NGSDb/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> NGSPipeDb Document</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="..">Getting start</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../NGSPipeDb/">NGSPipeDb Tutorial</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../NGSPipe-RNA-seq/">NGSPipe RNA-seq</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../NGSPipe-ChIP-seq/">NGSPipe ChIP-seq</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../NGSPipe-resequecing/">NGSPipe resequecing</a>
                    </li>
                </ul>
                <ul class="current">
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">NGSDb</a>
    <ul class="current">
    </ul>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../Linux/">Linux basic</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">NGSPipeDb Document</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>NGSDb</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/xuanblo/NGSPipeDb/mkdocs/edit/master/docs/NGSDb.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h2 id="nature-protocol">nature protocol</h2>
<p>for liangliang test</p>
<pre><code class="language-shell">conda create -n ngsdb mamba=0.1.2 python=3.8 -c conda-forge
conda activate ngsdb
mamba env update --file ngspipe/envs/requirements_ngsdb.yaml --prune
snakemake -s ngspipe/db_generate.Snakefile.py --configfile ngspipe/config/ngsdb.config.yaml -p -j 1
python ngsdb/manage.py runserver 
127.0.0.0:8000
</code></pre>
<h2 id="step-by-step-database-generate">Step-by-step database generate <a name="Step-by-Step-Database"></a></h2>
<p>We use django project to constructed our NGSDb. We have pareparied many apps for you. 嵌入. Please have a look:</p>
<table>
<thead>
<tr>
<th>django apps</th>
<th>description</th>
<th>package</th>
</tr>
</thead>
<tbody>
<tr>
<td>home</td>
<td>home page</td>
<td></td>
</tr>
<tr>
<td>geneExpAtlas</td>
<td>table</td>
<td></td>
</tr>
<tr>
<td>network</td>
<td></td>
<td></td>
</tr>
<tr>
<td>igv</td>
<td>genome browse</td>
<td><a href="https://github.com/igvteam/igv.js/wiki">IGV</a></td>
</tr>
<tr>
<td>blastplus</td>
<td>ncbi blast +</td>
<td>NCBI</td>
</tr>
<tr>
<td>ngstools</td>
<td>wooey</td>
<td></td>
</tr>
<tr>
<td>efp</td>
<td>efp browse</td>
<td></td>
</tr>
<tr>
<td>clustergrammer-js https://clustergrammer.readthedocs.io/clustergrammer_js.html</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>AQUAMIS will provide you with an interactive, browser-based report, showing the most important measures of your data on the first sight. 
All tables in the report can be sorted and filtered.
The table on the first tab shows the key values for a quick estimation of the success of your sequencing experiment and the assembly. 
On the second tab, there is a more detailed table, giving many additional measures.
 Additionally to the tables, many measures are provided as graphical feedback. On the third tab, you see plots which are generated for one complete sequencing experiment. On the fourth tab, there are plots which each show measures on one specific dataset. </p>
<h3 id="1">1. 安装环境 <a name="DatabaseRequirement"></a></h3>
<pre><code class="language-shell">django
wooey
clustergrammer
sklearn
pandas=0.25.3
</code></pre>
<h3 id="2-convert-analysis-result-to-sqlite3-file">2. convert analysis result to sqlite3 file <a name="Table2Sqlite3"></a></h3>
<p>modify model.py</p>
<pre><code>snakemake -s ngspipe/db_generate.Snakefile.py -p -j1 
</code></pre>
<h3 id="3-config">3. config <a name="DatabaseConfig"></a></h3>
<ol>
<li>修改 <code>mysite/mysite/settings.py</code></li>
</ol>
<pre><code class="language-shell"># Application definition

INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    # add custom app
    'geneAnno', # gene annotation from nr/nt/pfam/go/kegg
    'geneExpAtlas', # gene expression matrix
    'blast', # blast tool
]
</code></pre>
<h3 id="4-start-server">4. start server <a name="RunServer"></a></h3>
<p>Starting server by run <code>python ngsdb/manage.py runserver</code>, visit sebsite on http://127.0.0.1:8000.</p>
<h3 id="5-add-your-custome-data">5. add your custome data</h3>
<ol>
<li>table data in a page</li>
<li>custome script in wooey</li>
</ol>
<p>python manage.py makemigrations
python manage.py migrate
python manage.py addscript ../ngsdb/tools/test1.py</p>
<p>If you want use wooey tools on a task model <code>celery -A ProjectName worker -c 1 --beat -l info</code> optional.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../Linux/" class="btn btn-neutral float-right" title="Linux basic">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../NGSPipe-resequecing/" class="btn btn-neutral" title="NGSPipe resequecing"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p>Bioinformatics Group, XTBG, 2021</p>
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/xuanblo/NGSPipeDb/mkdocs/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../NGSPipe-resequecing/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../Linux/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
